# Maintainer: Furkan Kardame <furkan@fkardame.com>

pkgname=keyboard-component-git
_pkgname=keyboard-component
pkgver=r1164.2863cdc
pkgrel=1
pkgdesc='Keyboard Component for Mir'
url='https://gitlab.com/ubports/development/core/lomiri-keyboard'
arch=(x86_64 i686 armv7h aarch64)
license=(LGPL)
conflicts=(lomiri-system-compositor)
provides=(lomiri-system-compositor)
depends=(maliit-framework ubuntu-ui-toolkit)
makedepends=(git)
source=('git+https://gitlab.com/ubports/development/core/lomiri-keyboard')
sha256sums=('SKIP')

pkgver() {
  cd ${_pkgname}
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
   cd ${_pkgname}
   qmake-qt5 PREFIX=/usr
   make -j8
}
package() {
  cd ${_pkgname}
  make INSTALL_ROOT="${pkgdir}" install
}
