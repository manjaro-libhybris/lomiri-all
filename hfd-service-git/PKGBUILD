# Maintainer: Furkan Kardame <furkan@fkardame.com>

pkgname="hfd-service-git"
_pkgname="hfd-service"
pkgver=r35.8d6e2e1
pkgrel=1
pkgdesc="Human Feedback Service for Lomiri UI"
arch=("i686" "x86_64" "aarch64")
url="https://github.com/ubports/hfd-service"
license=("GPL3")
depends=(qt5-base qt5-declarative qt5-feedback)
makedepends=("cmake" "cmake-extras" "git")
source=("git+https://github.com/ubports/${_pkgname}.git#branch=xenial")
md5sums=("SKIP")
options=("!emptydirs")
provides=("${_pkgname}")
conflicts=("${_pkgname}")

pkgver() {
  cd ${_pkgname}
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}
prepare() 
{
  cd ${_pkgname}
}

build()
{
   cd ${_pkgname}
   mkdir -p build
   cd build
   cmake ../ -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBEXECDIR=lib -DCMAKE_INSTALL_SYSCONFDIR=/etc -DENABLE_LIBHYBRIS=off
   make
}

package()
{
    cd ${_pkgname}/build
    make DESTDIR="${pkgdir}" install
	mv ${pkgdir}/usr/lib/qt5 ${pkgdir}/usr/lib/qt/
} 
